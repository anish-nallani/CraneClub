<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Crane Club</title>

<style>
  :root{
    --ink: #415C7D;

    /* Base artboard size (do not change unless your PNGs change) */
    --stage-w: 1920;
    --stage-h: 1080;

    /* Computed scale (set by JS) */
    --scale: 1;

    /* Info bubble position in ARTBOARD PIXELS (scales with the stage) */
    --bubble-left: 75px;
    --bubble-top: 720px;
  }

  html, body{
    height:100%;
  }

  body{
    margin:0;
    overflow:hidden;
    background:#fff; /* prevents any behind-layer flash */
    font-family:"OCR-A BT",-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
    color:var(--ink);
  }

  /* ========= SCALED STAGE =========
     Everything inside is positioned in 1920x1080 coordinates.
     Stage is anchored LEFT + BOTTOM and scaled to COVER the screen (cropping as needed). */
  .stage{
    position:fixed;
    left:0;
    bottom:0;
    width: calc(var(--stage-w) * 1px);
    height: calc(var(--stage-h) * 1px);
    transform: scale(var(--scale));
    transform-origin: left bottom;
    z-index: 0;
  }

  /* ========= BACKGROUNDS (PURE FADE) ========= */
  .bg{
    position:absolute;
    inset:0;
    background-repeat:no-repeat;
    background-size: 100% 100%;   /* match your artboard exactly */
    background-position:left top;
    opacity:0;
    will-change:opacity;
  }
  .bg.current{ opacity:1; }
  .bg.next{ opacity:0; }

  body.bg-transition .bg.current{
    opacity:0;
    transition: opacity 260ms ease-out;
  }
  body.bg-transition .bg.next{
    opacity:1;
    transition: opacity 260ms ease-out;
  }

  /* ========= UI TEXT (artboard-fixed coords) ========= */
  .ui p{
    position:absolute;
    margin:0;
    font-size:18px;
    letter-spacing:0.08em;
    white-space:nowrap;
    color:var(--ink);
  }

  /* Enter prompt */
  .enter-prompt{
    top: 500px;
    left: 130px;
    cursor:pointer;
    user-select:none;
    transition: transform 140ms ease-out, color 140ms ease-out, opacity 140ms ease-out;
  }
  .enter-prompt:hover{
    color:#ffffff;
    transform:scale(1.08);
  }
  body.entered .enter-prompt{
    opacity:0;
    pointer-events:none;
  }

  /* Nav positions */
  .nav-home        { top: 380px; left: 205px; }
  .nav-about       { top: 410px; left: 255px; }
  .nav-donations   { top: 450px; left: 305px; }
  .nav-news        { top: 490px; left: 325px; }
  .nav-install     { top: 530px; left: 325px; }
  .nav-schedule    { top: 570px; left: 280px; }
  .nav-register    { top: 610px; left: 255px; }
  .nav-contact     { top: 650px; left: 200px; }

  .nav-item{
    cursor:pointer;
    user-select:none;
    transform-origin:left center;
    transition: transform 140ms ease-out, color 140ms ease-out, opacity 160ms ease-out;
  }

  body:not(.nav-ready) .nav-item{
    opacity:0;
    pointer-events:none;
    transform: translateX(-10px);
  }

  body.nav-ready .nav-item{
    opacity:1;
    pointer-events:auto;
    transform: translateX(0);
  }

  .nav-item:hover{
    color:#ffffff;
    transform:scale(1.08);
  }

  /* ========= INFO BUBBLE (artboard-fixed coords; scales with stage) ========= */
  .info-bubble{
    position:absolute;
    left: var(--bubble-left);
    top: var(--bubble-top);

    width:420px;
    min-height:90px;
    padding:14px 16px;

    border:1px solid rgba(65,92,125,0.45);
    background:rgba(255,255,255,0.16);
    backdrop-filter:blur(3px) saturate(160%);
    box-shadow:0 10px 26px rgba(0,0,0,0.18);
    color:var(--ink);

    opacity:0;
    pointer-events:none;
    transition: opacity 180ms ease-out;
  }

  body.info-visible .info-bubble{
    opacity:1;
    pointer-events:auto;
  }

  .info-title{
    font-size:12px;
    opacity:0.85;
    margin-bottom:8px;
    letter-spacing:0.06em;
  }

  .info-text{
    font-size:13px;
    line-height:1.55;
    letter-spacing:0.05em;
    white-space:normal;
  }
</style>
</head>

<body>

  <div class="stage" id="stage">
    <!-- backgrounds -->
    <div class="bg current" id="bgCurrent"></div>
    <div class="bg next" id="bgNext"></div>

    <!-- UI -->
    <div class="ui">
      <p class="enter-prompt" id="enterPrompt">enter</p>

      <p class="nav-home nav-item" data-key="home">home</p>
      <p class="nav-about nav-item" data-key="about">about</p>
      <p class="nav-donations nav-item" data-key="donations">donations</p>
      <p class="nav-news nav-item" data-key="news">news</p>
      <p class="nav-install nav-item" data-key="installations">installations</p>
      <p class="nav-schedule nav-item" data-key="schedule">schedule</p>
      <p class="nav-register nav-item" data-key="register">register</p>
      <p class="nav-contact nav-item" data-key="contact">contact</p>
    </div>

    <!-- Info bubble (scales with stage; appears only after nav click) -->
    <div class="info-bubble">
      <div class="info-title" id="infoTitle"></div>
      <div class="info-text" id="infoText"></div>
    </div>
  </div>

<script>
  /* ========= SCALE STAGE TO SCREEN (LEFT + BOTTOM ANCHOR, COVER) ========= */
  const STAGE_W = 1920;
  const STAGE_H = 1080;

  function updateScale(){
    const vw = window.innerWidth;
    const vh = window.innerHeight;

    // COVER: ensures wallpaper reaches bottom; crops as needed
    const scale = Math.max(vw / STAGE_W, vh / STAGE_H);
    document.documentElement.style.setProperty("--scale", scale.toString());
  }

  window.addEventListener("resize", updateScale);
  window.addEventListener("orientationchange", updateScale);
  updateScale();

  /* ========= MENU CONFIG ========= */
  const MENU = {
    home: { bg: "home.png", title: "SYSTEM // HOME", text: "Crane Club folds and donates paper cranes to local hospitals in Michigan." },
    about: { bg: "about.png", title: "SYSTEM // ABOUT", text: "Each crane is a reminder that someone is thinking of you." },
    donations: { bg: "donations.png", title: "SYSTEM // DONATIONS", text: "Donations help fund materials and hospital drop-offs." },
    news: { bg: "news.png", title: "SYSTEM // NEWS", text: "Updates, installations, and community milestones." },
    installations: { bg: "installations.png", title: "SYSTEM // INSTALLATIONS", text: "Organized crane drops at partnered hospital units." },
    schedule: { bg: "schedule.png", title: "SYSTEM // SCHEDULE", text: "Folding sessions, packaging nights, and drop-offs." },
    register: { bg: "register.png", title: "SYSTEM // REGISTER", text: "Volunteer or coordinate a hospital partnership." },
    contact: { bg: "contact.png", title: "SYSTEM // CONTACT", text: "Reach out to collaborate or learn more." }
  };

  const bgCurrent = document.getElementById("bgCurrent");
  const bgNext = document.getElementById("bgNext");
  const infoTitle = document.getElementById("infoTitle");
  const infoText = document.getElementById("infoText");
  const enterPrompt = document.getElementById("enterPrompt");

  let entered = false;
  let transitioning = false;

  // Default background before Enter / before any nav selection
  bgCurrent.style.backgroundImage = 'url("background.png")';

  const CHARS = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789#$%&*+-=?";

  function scramble(el, text){
    let i = 0;
    const interval = setInterval(() => {
      el.textContent = text
        .split("")
        .map((c, idx) => idx < i ? c : CHARS[Math.floor(Math.random() * CHARS.length)])
        .join("");
      if(i++ >= text.length){
        clearInterval(interval);
        el.textContent = text;
      }
    }, 20);
  }

  function fadeTo(url, onDone){
    bgNext.style.backgroundImage = `url("${url}")`;
    document.body.classList.add("bg-transition");

    setTimeout(() => {
      bgCurrent.style.backgroundImage = `url("${url}")`;
      bgNext.style.backgroundImage = "";
      document.body.classList.remove("bg-transition");
      onDone && onDone();
    }, 280);
  }

  function enterSite(){
    if (entered || transitioning) return;
    transitioning = true;

    fadeTo("enter.png", () => {
      entered = true;
      transitioning = false;
      document.body.classList.add("entered", "nav-ready");
      // info bubble stays hidden until a nav click
    });
  }

  function navigate(key){
    if (!entered || transitioning || !MENU[key]) return;
    transitioning = true;

    // bubble appears only after a nav selection (not on enter)
    document.body.classList.add("info-visible");

    infoTitle.textContent = MENU[key].title;
    scramble(infoText, MENU[key].text);

    fadeTo(MENU[key].bg, () => {
      transitioning = false;
    });
  }

  enterPrompt.addEventListener("click", enterSite);
  window.addEventListener("keydown", (e) => (e.key === "Enter") && enterSite());

  document.querySelectorAll(".nav-item").forEach(el => {
    el.addEventListener("click", () => navigate(el.dataset.key));
  });
</script>

</body>
</html>
